<!DOCTYPE html>
<html>
  <head>
    <title>优化-本地歌曲ID匹配</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/优化-本地歌曲id匹配/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/优化-本地歌曲id匹配/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (Rectangle) -->
      <div id="u474" class="ax_default heading_2">
        <div id="u474_div" class=""></div>
        <div id="u474_text" class="text ">
          <p><span>需求描述</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u475" class="ax_default flow_shape">
        <div id="u475_div" class=""></div>
        <div id="u475_text" class="text ">
          <p><span>用户进入本地音乐</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u476" class="ax_default flow_shape">
        <div id="u476_div" class=""></div>
        <div id="u476_text" class="text ">
          <p><span>音频指纹识别系统</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u477" class="ax_default connector">
        <img id="u477_seg0" class="img " src="images/优化-本地歌曲id匹配/u477_seg0.png" alt="u477_seg0"/>
        <img id="u477_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u477_seg1"/>
        <div id="u477_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u478" class="ax_default paragraph">
        <div id="u478_div" class=""></div>
        <div id="u478_text" class="text ">
          <p><span>用户播放歌曲，或者点击更多按钮</span></p><p><span>触发</span></p><p><span>客户端发现有新增歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Diamond) -->
      <div id="u479" class="ax_default flow_shape">
        <img id="u479_img" class="img " src="images/优化-本地歌曲id匹配/u479.png"/>
        <div id="u479_text" class="text ">
          <p><span>是否成功返回匹配id</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u480" class="ax_default flow_shape">
        <div id="u480_div" class=""></div>
        <div id="u480_text" class="text ">
          <p><span>记录歌曲id</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u481" class="ax_default flow_shape">
        <div id="u481_div" class=""></div>
        <div id="u481_text" class="text ">
          <p><span>记录下相应歌曲，不再尝试识别歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u482" class="ax_default connector">
        <img id="u482_seg0" class="img " src="images/优化-本地歌曲id匹配/u482_seg0.png" alt="u482_seg0"/>
        <img id="u482_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u482_seg1"/>
        <div id="u482_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u483" class="ax_default connector">
        <img id="u483_seg0" class="img " src="images/优化-本地歌曲id匹配/u483_seg0.png" alt="u483_seg0"/>
        <img id="u483_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u483_seg1"/>
        <div id="u483_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u484" class="ax_default connector">
        <img id="u484_seg0" class="img " src="images/优化-本地歌曲id匹配/u484_seg0.png" alt="u484_seg0"/>
        <img id="u484_seg1" class="img " src="images/优化-本地歌曲id匹配/u484_seg1.png" alt="u484_seg1"/>
        <div id="u484_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u485" class="ax_default paragraph">
        <div id="u485_div" class=""></div>
        <div id="u485_text" class="text ">
          <p><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;font-size:20px;">-需求改动</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">通过调研，目前我们有一套“基于音频指纹的歌曲识别系统”，仅用作用户“一键升级音质时使用”。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">目前已知原因至少有以下问题：</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">1.早期该识别系统准确率较差</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">2.后续准确率得到一定提升，但接口承载能力有问题，导致较多歌曲请求识别接口时，习惯性宕机</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;"><br></span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">故而目前方案调整为：</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">1.申请测试资源，对现有音频指纹识别系统结果进行一个客观测试。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">2.优先使用精准匹配系统，</span><span style="font-family:'PingFangSC-Semibold', 'PingFang SC Semibold', 'PingFang SC';font-weight:600;">逻辑为：客户端将音乐的 歌曲名，歌手名，专辑名，传给后端，后端通过这3个数据，精准匹配出结果，并返回线上id</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Semibold', 'PingFang SC Semibold', 'PingFang SC';font-weight:600;">3.精准匹配后，未能成功匹配的歌曲，再次调用音频指纹识别，若识别失败后则不再尝试识别该歌曲。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">4.客户端请求接口的机制进行调整，不再批量全部请求，改为用户进入本地歌曲触发播歌，或者更多按钮时，保持静默状态，逐首请求，待返回结果后再请求下一首歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u486" class="ax_default paragraph">
        <div id="u486_div" class=""></div>
        <div id="u486_text" class="text ">
          <p><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-size:20px;">-识别机制</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">当扫描到用户本地歌曲列表内有新增歌曲时，依次请求“精准匹配系统”，“指纹识别系统”，将匹配结果返回给客户端。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">若没有识别到相应的曲库资源id，则保持原状；</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">若已经识别到相应的曲库资源id，则将用户的本地音乐替换为线上资源。</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u487" class="ax_default flow_shape">
        <div id="u487_div" class=""></div>
        <div id="u487_text" class="text ">
          <p><span>精准匹配系统</span></p>
        </div>
      </div>

      <!-- Unnamed (Diamond) -->
      <div id="u488" class="ax_default flow_shape">
        <img id="u488_img" class="img " src="images/优化-本地歌曲id匹配/u479.png"/>
        <div id="u488_text" class="text ">
          <p><span>是否成功返回匹配结果</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u489" class="ax_default flow_shape">
        <div id="u489_div" class=""></div>
        <div id="u489_text" class="text ">
          <p><span>记录歌曲id</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u490" class="ax_default connector">
        <img id="u490_seg0" class="img " src="images/优化-本地歌曲id匹配/u490_seg0.png" alt="u490_seg0"/>
        <img id="u490_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u490_seg1"/>
        <div id="u490_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u491" class="ax_default connector">
        <img id="u491_seg0" class="img " src="images/优化-本地歌曲id匹配/u482_seg0.png" alt="u491_seg0"/>
        <img id="u491_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u491_seg1"/>
        <div id="u491_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u492" class="ax_default connector">
        <img id="u492_seg0" class="img " src="images/优化-本地歌曲id匹配/u492_seg0.png" alt="u492_seg0"/>
        <img id="u492_seg1" class="img " src="images/优化-本地歌曲id匹配/u492_seg1.png" alt="u492_seg1"/>
        <div id="u492_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u493" class="ax_default paragraph">
        <div id="u493_div" class=""></div>
        <div id="u493_text" class="text ">
          <p><span>是</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u494" class="ax_default paragraph">
        <div id="u494_div" class=""></div>
        <div id="u494_text" class="text ">
          <p><span>否</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u495" class="ax_default paragraph">
        <div id="u495_div" class=""></div>
        <div id="u495_text" class="text ">
          <p><span>是</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u496" class="ax_default paragraph">
        <div id="u496_div" class=""></div>
        <div id="u496_text" class="text ">
          <p><span>否</span></p>
        </div>
      </div>
    </div>
  </body>
</html>
