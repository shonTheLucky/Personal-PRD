<!DOCTYPE html>
<html>
  <head>
    <title>优化-本地歌曲ID匹配</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/优化-本地歌曲id匹配/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/优化-本地歌曲id匹配/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (Rectangle) -->
      <div id="u502" class="ax_default heading_2">
        <div id="u502_div" class=""></div>
        <div id="u502_text" class="text ">
          <p><span>需求描述</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u503" class="ax_default flow_shape">
        <div id="u503_div" class=""></div>
        <div id="u503_text" class="text ">
          <p><span>用户进入本地音乐</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u504" class="ax_default flow_shape">
        <div id="u504_div" class=""></div>
        <div id="u504_text" class="text ">
          <p><span>音频指纹识别系统</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u505" class="ax_default connector">
        <img id="u505_seg0" class="img " src="images/优化-本地歌曲id匹配/u505_seg0.png" alt="u505_seg0"/>
        <img id="u505_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u505_seg1"/>
        <div id="u505_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u506" class="ax_default paragraph">
        <div id="u506_div" class=""></div>
        <div id="u506_text" class="text ">
          <p><span>用户播放歌曲，或者点击更多按钮</span></p><p><span>触发</span></p><p><span>客户端发现有新增歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Diamond) -->
      <div id="u507" class="ax_default flow_shape">
        <img id="u507_img" class="img " src="images/优化-本地歌曲id匹配/u507.png"/>
        <div id="u507_text" class="text ">
          <p><span>是否成功返回匹配id</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u508" class="ax_default flow_shape">
        <div id="u508_div" class=""></div>
        <div id="u508_text" class="text ">
          <p><span>记录歌曲id</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u509" class="ax_default flow_shape">
        <div id="u509_div" class=""></div>
        <div id="u509_text" class="text ">
          <p><span>记录下相应歌曲，不再尝试识别歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u510" class="ax_default connector">
        <img id="u510_seg0" class="img " src="images/优化-本地歌曲id匹配/u510_seg0.png" alt="u510_seg0"/>
        <img id="u510_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u510_seg1"/>
        <div id="u510_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u511" class="ax_default connector">
        <img id="u511_seg0" class="img " src="images/优化-本地歌曲id匹配/u511_seg0.png" alt="u511_seg0"/>
        <img id="u511_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u511_seg1"/>
        <div id="u511_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u512" class="ax_default connector">
        <img id="u512_seg0" class="img " src="images/优化-本地歌曲id匹配/u512_seg0.png" alt="u512_seg0"/>
        <img id="u512_seg1" class="img " src="images/优化-本地歌曲id匹配/u512_seg1.png" alt="u512_seg1"/>
        <div id="u512_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u513" class="ax_default paragraph">
        <div id="u513_div" class=""></div>
        <div id="u513_text" class="text ">
          <p><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;font-size:20px;">-需求改动</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">通过调研，目前我们有一套“基于音频指纹的歌曲识别系统”，仅用作用户“一键升级音质时使用”。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">目前已知原因至少有以下问题：</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">1.早期该识别系统准确率较差</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">2.后续准确率得到一定提升，但接口承载能力有问题，导致较多歌曲请求识别接口时，习惯性宕机</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;"><br></span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">故而目前方案调整为：</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">1.申请测试资源，对现有音频指纹识别系统结果进行一个客观测试。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">2.优先使用精准匹配系统，</span><span style="font-family:'PingFangSC-Semibold', 'PingFang SC Semibold', 'PingFang SC';font-weight:600;">逻辑为：客户端将音乐的 歌曲名，歌手名，专辑名，传给后端，后端通过这3个数据，精准匹配出结果，并返回线上id</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Semibold', 'PingFang SC Semibold', 'PingFang SC';font-weight:600;">3.精准匹配后，未能成功匹配的歌曲，再次调用音频指纹识别，若识别失败后则不再尝试识别该歌曲。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">4.客户端请求接口的机制进行调整，不再批量全部请求，改为用户进入本地歌曲触发播歌，或者更多按钮时，保持静默状态，逐首请求，待返回结果后再请求下一首歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u514" class="ax_default paragraph">
        <div id="u514_div" class=""></div>
        <div id="u514_text" class="text ">
          <p><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-size:20px;">-识别机制</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">当扫描到用户本地歌曲列表内有新增歌曲时，依次请求“精准匹配系统”，“指纹识别系统”，将匹配结果返回给客户端。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">若没有识别到相应的曲库资源id，则保持原状；</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">若已经识别到相应的曲库资源id，则将用户的本地音乐替换为线上资源。</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u515" class="ax_default flow_shape">
        <div id="u515_div" class=""></div>
        <div id="u515_text" class="text ">
          <p><span>精准匹配系统</span></p>
        </div>
      </div>

      <!-- Unnamed (Diamond) -->
      <div id="u516" class="ax_default flow_shape">
        <img id="u516_img" class="img " src="images/优化-本地歌曲id匹配/u507.png"/>
        <div id="u516_text" class="text ">
          <p><span>是否成功返回匹配结果</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u517" class="ax_default flow_shape">
        <div id="u517_div" class=""></div>
        <div id="u517_text" class="text ">
          <p><span>记录歌曲id</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u518" class="ax_default connector">
        <img id="u518_seg0" class="img " src="images/优化-本地歌曲id匹配/u518_seg0.png" alt="u518_seg0"/>
        <img id="u518_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u518_seg1"/>
        <div id="u518_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u519" class="ax_default connector">
        <img id="u519_seg0" class="img " src="images/优化-本地歌曲id匹配/u510_seg0.png" alt="u519_seg0"/>
        <img id="u519_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u519_seg1"/>
        <div id="u519_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u520" class="ax_default connector">
        <img id="u520_seg0" class="img " src="images/优化-本地歌曲id匹配/u520_seg0.png" alt="u520_seg0"/>
        <img id="u520_seg1" class="img " src="images/优化-本地歌曲id匹配/u520_seg1.png" alt="u520_seg1"/>
        <div id="u520_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u521" class="ax_default paragraph">
        <div id="u521_div" class=""></div>
        <div id="u521_text" class="text ">
          <p><span>是</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u522" class="ax_default paragraph">
        <div id="u522_div" class=""></div>
        <div id="u522_text" class="text ">
          <p><span>否</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u523" class="ax_default paragraph">
        <div id="u523_div" class=""></div>
        <div id="u523_text" class="text ">
          <p><span>是</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u524" class="ax_default paragraph">
        <div id="u524_div" class=""></div>
        <div id="u524_text" class="text ">
          <p><span>否</span></p>
        </div>
      </div>
    </div>
  </body>
</html>
