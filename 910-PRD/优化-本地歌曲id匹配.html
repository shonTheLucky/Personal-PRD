<!DOCTYPE html>
<html>
  <head>
    <title>优化-本地歌曲ID匹配</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/优化-本地歌曲id匹配/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/优化-本地歌曲id匹配/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (Rectangle) -->
      <div id="u421" class="ax_default heading_2">
        <div id="u421_div" class=""></div>
        <div id="u421_text" class="text ">
          <p><span>需求描述</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u422" class="ax_default flow_shape">
        <div id="u422_div" class=""></div>
        <div id="u422_text" class="text ">
          <p><span>用户进入本地音乐</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u423" class="ax_default flow_shape">
        <div id="u423_div" class=""></div>
        <div id="u423_text" class="text ">
          <p><span>音频指纹识别系统</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u424" class="ax_default connector">
        <img id="u424_seg0" class="img " src="images/优化-本地歌曲id匹配/u424_seg0.png" alt="u424_seg0"/>
        <img id="u424_seg1" class="img " src="images/h5-市场-小小晨读/u80_seg3.png" alt="u424_seg1"/>
        <div id="u424_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u425" class="ax_default paragraph">
        <div id="u425_div" class=""></div>
        <div id="u425_text" class="text ">
          <p><span>用户播放歌曲，或者点击更多按钮</span></p><p><span>触发</span></p><p><span>客户端发现有新增歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Diamond) -->
      <div id="u426" class="ax_default flow_shape">
        <img id="u426_img" class="img " src="images/优化-本地歌曲id匹配/u426.png"/>
        <div id="u426_text" class="text ">
          <p><span>是否成功返回匹配id</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u427" class="ax_default flow_shape">
        <div id="u427_div" class=""></div>
        <div id="u427_text" class="text ">
          <p><span>记录歌曲id</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u428" class="ax_default flow_shape">
        <div id="u428_div" class=""></div>
        <div id="u428_text" class="text ">
          <p><span>记录下相应歌曲，不再尝试识别歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u429" class="ax_default connector">
        <img id="u429_seg0" class="img " src="images/优化-本地歌曲id匹配/u429_seg0.png" alt="u429_seg0"/>
        <img id="u429_seg1" class="img " src="images/h5-市场-小小晨读/u80_seg3.png" alt="u429_seg1"/>
        <div id="u429_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u430" class="ax_default connector">
        <img id="u430_seg0" class="img " src="images/优化-本地歌曲id匹配/u430_seg0.png" alt="u430_seg0"/>
        <img id="u430_seg1" class="img " src="images/h5-市场-小小晨读/u80_seg3.png" alt="u430_seg1"/>
        <div id="u430_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u431" class="ax_default connector">
        <img id="u431_seg0" class="img " src="images/优化-本地歌曲id匹配/u431_seg0.png" alt="u431_seg0"/>
        <img id="u431_seg1" class="img " src="images/优化-本地歌曲id匹配/u431_seg1.png" alt="u431_seg1"/>
        <div id="u431_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u432" class="ax_default paragraph">
        <div id="u432_div" class=""></div>
        <div id="u432_text" class="text ">
          <p><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;font-size:20px;">-需求改动</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">通过调研，目前我们有一套“基于音频指纹的歌曲识别系统”，仅用作用户“一键升级音质时使用”。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">目前已知原因至少有以下问题：</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">1.早期该识别系统准确率较差</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">2.后续准确率得到一定提升，但接口承载能力有问题，导致较多歌曲请求识别接口时，习惯性宕机</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;"><br></span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">故而目前方案调整为：</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">1.申请测试资源，对现有音频指纹识别系统结果进行一个客观测试。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">2.优先使用精准匹配系统，</span><span style="font-family:'PingFangSC-Semibold', 'PingFang SC Semibold', 'PingFang SC';font-weight:600;">逻辑为：客户端将音乐的 歌曲名，歌手名，专辑名，传给后端，后端通过这3个数据，精准匹配出结果，并返回线上id</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Semibold', 'PingFang SC Semibold', 'PingFang SC';font-weight:600;">3.精准匹配后，未能成功匹配的歌曲，再次调用音频指纹识别，若识别失败后则不再尝试识别该歌曲。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">4.客户端请求接口的机制进行调整，不再批量全部请求，改为用户进入本地歌曲触发播歌，或者更多按钮时，保持静默状态，逐首请求，待返回结果后再请求下一首歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u433" class="ax_default paragraph">
        <div id="u433_div" class=""></div>
        <div id="u433_text" class="text ">
          <p><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-size:20px;">-识别机制</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">当扫描到用户本地歌曲列表内有新增歌曲时，依次请求“精准匹配系统”，“指纹识别系统”，将匹配结果返回给客户端。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">若没有识别到相应的曲库资源id，则保持原状；</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">若已经识别到相应的曲库资源id，则将用户的本地音乐替换为线上资源。</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u434" class="ax_default flow_shape">
        <div id="u434_div" class=""></div>
        <div id="u434_text" class="text ">
          <p><span>精准匹配系统</span></p>
        </div>
      </div>

      <!-- Unnamed (Diamond) -->
      <div id="u435" class="ax_default flow_shape">
        <img id="u435_img" class="img " src="images/优化-本地歌曲id匹配/u426.png"/>
        <div id="u435_text" class="text ">
          <p><span>是否成功返回匹配结果</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u436" class="ax_default flow_shape">
        <div id="u436_div" class=""></div>
        <div id="u436_text" class="text ">
          <p><span>记录歌曲id</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u437" class="ax_default connector">
        <img id="u437_seg0" class="img " src="images/优化-本地歌曲id匹配/u437_seg0.png" alt="u437_seg0"/>
        <img id="u437_seg1" class="img " src="images/h5-市场-小小晨读/u80_seg3.png" alt="u437_seg1"/>
        <div id="u437_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u438" class="ax_default connector">
        <img id="u438_seg0" class="img " src="images/优化-本地歌曲id匹配/u429_seg0.png" alt="u438_seg0"/>
        <img id="u438_seg1" class="img " src="images/h5-市场-小小晨读/u80_seg3.png" alt="u438_seg1"/>
        <div id="u438_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u439" class="ax_default connector">
        <img id="u439_seg0" class="img " src="images/优化-本地歌曲id匹配/u439_seg0.png" alt="u439_seg0"/>
        <img id="u439_seg1" class="img " src="images/优化-本地歌曲id匹配/u439_seg1.png" alt="u439_seg1"/>
        <div id="u439_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u440" class="ax_default paragraph">
        <div id="u440_div" class=""></div>
        <div id="u440_text" class="text ">
          <p><span>是</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u441" class="ax_default paragraph">
        <div id="u441_div" class=""></div>
        <div id="u441_text" class="text ">
          <p><span>否</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u442" class="ax_default paragraph">
        <div id="u442_div" class=""></div>
        <div id="u442_text" class="text ">
          <p><span>是</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u443" class="ax_default paragraph">
        <div id="u443_div" class=""></div>
        <div id="u443_text" class="text ">
          <p><span>否</span></p>
        </div>
      </div>
    </div>
  </body>
</html>
