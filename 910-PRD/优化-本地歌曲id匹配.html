<!DOCTYPE html>
<html>
  <head>
    <title>优化-本地歌曲ID匹配</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/优化-本地歌曲id匹配/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/优化-本地歌曲id匹配/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- Unnamed (Rectangle) -->
      <div id="u635" class="ax_default heading_2">
        <div id="u635_div" class=""></div>
        <div id="u635_text" class="text ">
          <p><span>需求描述</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u636" class="ax_default flow_shape">
        <div id="u636_div" class=""></div>
        <div id="u636_text" class="text ">
          <p><span>用户进入本地音乐</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u637" class="ax_default flow_shape">
        <div id="u637_div" class=""></div>
        <div id="u637_text" class="text ">
          <p><span>音频指纹识别系统</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u638" class="ax_default connector">
        <img id="u638_seg0" class="img " src="images/优化-本地歌曲id匹配/u638_seg0.png" alt="u638_seg0"/>
        <img id="u638_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u638_seg1"/>
        <div id="u638_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u639" class="ax_default paragraph">
        <div id="u639_div" class=""></div>
        <div id="u639_text" class="text ">
          <p><span>用户播放歌曲，或者点击更多按钮</span></p><p><span>触发</span></p><p><span>客户端发现有新增歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Diamond) -->
      <div id="u640" class="ax_default flow_shape">
        <img id="u640_img" class="img " src="images/优化-本地歌曲id匹配/u640.png"/>
        <div id="u640_text" class="text ">
          <p><span>是否成功返回匹配id</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u641" class="ax_default flow_shape">
        <div id="u641_div" class=""></div>
        <div id="u641_text" class="text ">
          <p><span>记录歌曲id</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u642" class="ax_default flow_shape">
        <div id="u642_div" class=""></div>
        <div id="u642_text" class="text ">
          <p><span>记录下相应歌曲，不再尝试识别歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u643" class="ax_default connector">
        <img id="u643_seg0" class="img " src="images/优化-本地歌曲id匹配/u643_seg0.png" alt="u643_seg0"/>
        <img id="u643_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u643_seg1"/>
        <div id="u643_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u644" class="ax_default connector">
        <img id="u644_seg0" class="img " src="images/优化-本地歌曲id匹配/u644_seg0.png" alt="u644_seg0"/>
        <img id="u644_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u644_seg1"/>
        <div id="u644_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u645" class="ax_default connector">
        <img id="u645_seg0" class="img " src="images/优化-本地歌曲id匹配/u645_seg0.png" alt="u645_seg0"/>
        <img id="u645_seg1" class="img " src="images/优化-本地歌曲id匹配/u645_seg1.png" alt="u645_seg1"/>
        <div id="u645_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u646" class="ax_default paragraph">
        <div id="u646_div" class=""></div>
        <div id="u646_text" class="text ">
          <p><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;font-size:20px;">-需求改动</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">通过调研，目前我们有一套“基于音频指纹的歌曲识别系统”，仅用作用户“一键升级音质时使用”。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">目前已知原因至少有以下问题：</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">1.早期该识别系统准确率较差</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">2.后续准确率得到一定提升，但接口承载能力有问题，导致较多歌曲请求识别接口时，习惯性宕机</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;"><br></span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">故而目前方案调整为：</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">1.申请测试资源，对现有音频指纹识别系统结果进行一个客观测试。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">2.优先使用精准匹配系统，</span><span style="font-family:'PingFangSC-Semibold', 'PingFang SC Semibold', 'PingFang SC';font-weight:600;">逻辑为：客户端将音乐的 歌曲名，歌手名，专辑名，传给后端，后端通过这3个数据，精准匹配出结果，并返回线上id</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Semibold', 'PingFang SC Semibold', 'PingFang SC';font-weight:600;">3.精准匹配后，未能成功匹配的歌曲，再次调用音频指纹识别，若识别失败后则不再尝试识别该歌曲。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-weight:400;">4.客户端请求接口的机制进行调整，不再批量全部请求，改为用户进入本地歌曲触发播歌，或者更多按钮时，保持静默状态，逐首请求，待返回结果后再请求下一首歌曲</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u647" class="ax_default paragraph">
        <div id="u647_div" class=""></div>
        <div id="u647_text" class="text ">
          <p><span style="font-family:'PingFangSC-Regular', 'PingFang SC';font-size:20px;">-识别机制</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">当扫描到用户本地歌曲列表内有新增歌曲时，依次请求“精准匹配系统”，“指纹识别系统”，将匹配结果返回给客户端。</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">若没有识别到相应的曲库资源id，则保持原状；</span></p><p style="font-size:16px;"><span style="font-family:'PingFangSC-Regular', 'PingFang SC';">若已经识别到相应的曲库资源id，则将用户的本地音乐替换为线上资源。</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u648" class="ax_default flow_shape">
        <div id="u648_div" class=""></div>
        <div id="u648_text" class="text ">
          <p><span>精准匹配系统</span></p>
        </div>
      </div>

      <!-- Unnamed (Diamond) -->
      <div id="u649" class="ax_default flow_shape">
        <img id="u649_img" class="img " src="images/优化-本地歌曲id匹配/u640.png"/>
        <div id="u649_text" class="text ">
          <p><span>是否成功返回匹配结果</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u650" class="ax_default flow_shape">
        <div id="u650_div" class=""></div>
        <div id="u650_text" class="text ">
          <p><span>记录歌曲id</span></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u651" class="ax_default connector">
        <img id="u651_seg0" class="img " src="images/优化-本地歌曲id匹配/u651_seg0.png" alt="u651_seg0"/>
        <img id="u651_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u651_seg1"/>
        <div id="u651_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u652" class="ax_default connector">
        <img id="u652_seg0" class="img " src="images/优化-本地歌曲id匹配/u643_seg0.png" alt="u652_seg0"/>
        <img id="u652_seg1" class="img " src="images/h5-市场-小小晨读/u78_seg3.png" alt="u652_seg1"/>
        <div id="u652_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Connector) -->
      <div id="u653" class="ax_default connector">
        <img id="u653_seg0" class="img " src="images/优化-本地歌曲id匹配/u653_seg0.png" alt="u653_seg0"/>
        <img id="u653_seg1" class="img " src="images/优化-本地歌曲id匹配/u653_seg1.png" alt="u653_seg1"/>
        <div id="u653_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u654" class="ax_default paragraph">
        <div id="u654_div" class=""></div>
        <div id="u654_text" class="text ">
          <p><span>是</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u655" class="ax_default paragraph">
        <div id="u655_div" class=""></div>
        <div id="u655_text" class="text ">
          <p><span>否</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u656" class="ax_default paragraph">
        <div id="u656_div" class=""></div>
        <div id="u656_text" class="text ">
          <p><span>是</span></p>
        </div>
      </div>

      <!-- Unnamed (Rectangle) -->
      <div id="u657" class="ax_default paragraph">
        <div id="u657_div" class=""></div>
        <div id="u657_text" class="text ">
          <p><span>否</span></p>
        </div>
      </div>
    </div>
  </body>
</html>
